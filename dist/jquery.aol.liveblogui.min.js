(function(e){e.fn.liveBlogLiteUi=function(t){var n={postId:null,url:null,toolbarEnabled:!1,pageSize:0},r=e(this),i=function(t){if(e.fn.liveBlogLiteApi){var i=e.extend(!0,{},n,t),s=!0,o=i.pageSize,u=o,a=null,f=null,l=function(t,n){var r=t.content,i=t.type,s=t.id,o=t.caption,u=t.tags,a=t.date,f=t.memberId,l='<a href="#p'+s+'">'+m(a)+"</a> by "+t.memberName;n?n.empty():n=e("<p />",{id:"p"+s,"class":"lb-post"}),i==="text"||i==="comment"?(n.append(e("<span />",{text:r,"class":"lb-post-text"})),i==="comment"&&n.addClass("lb-comment")):i==="image"&&n.append(e("<span />",{text:o,"class":"lb-post-caption"}),e("<img />",{src:r,height:100})),n.append(e("<span />",{html:l,"class":"lb-post-timestamp"}));if(t.tags&&t.tags.length){var c=e("<ul />",{"class":"lb-post-tags"}).appendTo(n);e.each(t.tags,function(t,n){c.append(e("<li />",{text:n}))})}return n},c=function(t){var n=e("#p"+t.id,a);n.length||(n=l(t),n.length&&(n.hide(),t.type==="comment"&&t.p?n.insertAfter(e("#p"+t.p)):n.prependTo(a),n.fadeIn(400)))},h=function(t){var n=e("#p"+t.id,a);n.length&&(n=l(t,n),n&&n.hide().fadeIn(400))},p=function(t){var n=e("#p"+t.id,a);n.length&&n.fadeOut(400,"swing",function(){n.remove()})},d=function(e,t){console.log(t),e=e||[],t=t||0;var n=e.length,r=0;t>0&&(r=Math.max(n-1-t,0));for(var i=r;i<n;i++)c(e[i])},v=function(t){var n=e("#p"+t,a);n.length},m=function(e){e=new Date(e);var t="am",n=e.getHours(),r=e.getMinutes(),i="",s="",o="",u=new Date,a=new Date(u.getFullYear(),u.getMonth(),u.getDate());return n>=12&&(t="pm"),n===0?n=12:n>12&&(n-=12),r<10&&(r="0"+r),i=n+":"+r+t,s=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear(),e.getTime()>=a.getTime()?o=i:o=s+", "+i,o},g=function(t){var n=e(t.target);s?(y(),n.text("Pause")):(b(),n.text("Play"))},y=function(){r.liveBlogLiteApi("play"),s=!1},b=function(){r.liveBlogLiteApi("pause"),s=!0};r.addClass("lb"),i.toolbarEnabled&&r.append(f=e("<div />",{"class":"lb-toolbar"}).append(e("<a />",{"class":"lb-pause-button",text:"Pause"}).bind("click",e.proxy(g,this)))),a=e("<div />",{"class":"lb-post-container"}).appendTo(r),r.bind("update",function(t,n){var r=window.location.hash;d(n.updates,u),e(n.changes).each(function(e,t){h(t)}),e(n.deletes).each(function(e,t){p(t)});if(r.length){var i,s,o=r.indexOf("p");o>-1&&(s=o+1,i=r.substring(s,r.length),v(i))}}),r.liveBlogLiteApi(i),s=!1}};return this.each(function(){t=t||{},i(t)})}})(jQuery);